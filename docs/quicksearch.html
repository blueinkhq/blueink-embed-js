<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"embed.js.html":{"id":"embed.js.html","title":"Source: embed.js","body":" BlueInk Embed JS Classes BlueInkEmbedErrorBlueInkEmbed Global EVENT Source: embed.js import EventEmitter from \"eventemitter3\"; import isPlainObject from 'lodash.isplainobject'; import pick from 'lodash.pick'; import qs from 'qs'; export const PUBLIC_API_KEY_PARAM = 'publicAPIKey'; export const IFRAME_CLASSNAME = 'blueink-sig-iframe'; /** * Event types that can be emitted by BlueInkEmbed. * These can be accessed via the BlueInkEmbed class, e.g. BlueInkEmbed.EVENT.COMPLETE, etc. * @readonly * @enum {string} * * @example * embed = new BlueInkEmbed(myPublicAPIKey); * * embed.on(BlueInkEmbed.EVENT.COMPLETE, () =&gt; { * console.log('signing complete!'); * }); * * @example * embed.on(BlueInkEmbed.EVENT.ERROR, (eventData) =&gt; { * console.log('Signing error occurred.'); * console.log(eventData.message); * }); */ const EVENT = { /** Any event occurred. Use this if you want to listen for all events with a single callback. */ ANY: 'any', /** The initial load of the iFrame content is complete. Note, the documents may not yet be ready to sign. */ LOAD: 'load', /** The documents are ready to sign. */ READY: 'ready', /** The signing is complete. */ COMPLETE: 'complete', /** Signer authentication failed. */ AUTH_FAIL: 'auth_fail', /** Signer authentication succeeded. Note, this event is still fired if no authentication options were selected. */ AUTH_SUCCESS: 'auth_success', /** An error that prevents embedded signing from continuing. */ ERROR: 'error', }; export { EVENT }; const MIN_PUBLIC_API_KEY_LENGTH = 40; const PUBLIC_API_KEY_PREFIX = 'public_'; const ALLOWED_MOUNT_OPTIONS = [ 'class', 'debug', 'isTest', 'locale', 'redirectURL', 'replace', ]; /** * Custom Error class thrown for some errors in BlueInkEmbed */ export class BlueInkEmbedError extends Error { /** * Create a BlueInkEmbedError * @param {string} message - a message providing additional details about the error */ constructor(message) { super(message); this.name = 'BlueInkEmbedError'; } } /** * Class that helps create and manage embedded signing iFrames powered by BlueInk. * @extends EventEmitter */ class BlueInkEmbed extends EventEmitter { static _mounted = false; _containerEl = null; _debugMode = false; _iFrameEl = null; _iFrameOrigin = null; _publicAPIKey = null; static EVENT = EVENT; static Error = BlueInkEmbedError; /** * Create a new BlueInkEmbed instance, which you can use to mount and unmount embedded signing iFrames. * @param {string} publicAPIKey - the public API key for your BlueInk API App. This can be obtained * by logging into your BlueInk Dashboard, or via the BlueInk API at /account/ */ constructor(publicAPIKey) { super(); if (!publicAPIKey) { throw new TypeError('publicAPIKey must be provided.') } if (publicAPIKey.length &lt; MIN_PUBLIC_API_KEY_LENGTH) { throw new TypeError( 'publicAPIKey is too short. Please verify you are using a valid BlueInk public API key.' ); } if (!publicAPIKey.startsWith(PUBLIC_API_KEY_PREFIX)) { throw new TypeError( 'publicAPIKey is invalid. Please verify you are using a valid BlueInk public API key.' ) } this._publicAPIKey = publicAPIKey; } // Document the methods from the EventEmitter /** * * @param {string} container - the css selector of the container into which the embedded signing iFrame * will be injected * @param {string} embeddedSigningURL - the embedded signing URL, as returned by an API call to * /packets/&lt;packet_id&gt;/embed_url/ * @param {object} options - optional arguments * @param {boolean} options.debug - if true, additional information will be printed to the console * and displayed in the iFrame (if there is an error) * @param {boolean} options.isTest - set to true when testing in a development environment (or locally), to * turn off verification of the referring domain. This is only valid for embedded signing of test Bundles * (which were created with is_test set to true) * @param {string} options.locale - set the initial language / locale for the embedded signature iFrame * @param {string} options.redirectURL - If provided, the parent page (not the iFrame) will be redirected * to this URL upon successful completion of a signing * @param {string} options.replace - If true, the signing iFrame replaces the contents of container, instead * of being appended to the contents * @throws {BlueInkEmbedError} when (1) there is already a mounted BlueInkEmbed iFrame instance, * (2) the container element does not exist, or (3) the container selector corresponds to more than one element. */ mount(embeddedSigningURL, container = 'body', options = {}) { if (BlueInkEmbed._mounted) { throw new BlueInkEmbedError('Cannot mount multiple iFrames at once') } let cleanOptions; // allow container to be omitted if (isPlainObject(container)) { cleanOptions = pick(container, ALLOWED_MOUNT_OPTIONS); container = 'body'; } else { cleanOptions = pick(options, ALLOWED_MOUNT_OPTIONS); } const containerNodes = document.querySelectorAll(container); if (containerNodes.length &gt; 1) { throw new BlueInkEmbedError(`More than one element found matching container selector \"${container}\"`); } if (containerNodes.length === 0) { throw new BlueInkEmbedError(`Cannot find element matching container selector \"${container}\"`); } this._debugMode = Boolean(cleanOptions.debug); this._containerEl = containerNodes[0]; this._iFrameOrigin = this._extractOrigin(embeddedSigningURL); const processedURL = this._buildFinalURL(embeddedSigningURL, cleanOptions); const className = cleanOptions.className || IFRAME_CLASSNAME; this._iFrameEl = this._createIframe(processedURL, className); if (options.replace) { this._containerEl.innerHTML = ''; } this._containerEl.appendChild(this._iFrameEl); this.registerMessageListener(); BlueInkEmbed._mounted = true; // FIXME - sanity checks on size of container element, after rendering } /** * Remove the BlueInk eSignature iFrame. If there is no iFrame (ie, mount(...) was not * called previously), this is a noop. */ unmount() { if (this._iFrameEl) { this._iFrameEl.parentNode.removeChild(this._iFrameEl); this._iFrameEl = null; this._iFrameOrigin = null; this._containerEl = null; this._debugMode = false; this.removeMessageListener() } BlueInkEmbed._mounted = false; } registerMessageListener() { window.addEventListener('message', this._receiveMessage, false); } removeMessageListener() { window.removeEventListener('message', this._receiveMessage, false); } /** * * @returns {Element|null} The DOM Element, or null if no embedded signing iFrame currently exists. */ get iFrameEl() { return this._iFrameEl; } _debug(...args) { if (this._debugMode) { console.debug(...args); } } /** * Receive a message from the embedded iFrame and emit an event * @param {object} event - an event as dispatched from window.postMessage() * @private */ _receiveMessage = (event) =&gt; { if (event.origin !== this._iFrameOrigin) { return; } if (this._iFrameEl &amp;&amp; (event.source !== this._iFrameEl.contentWindow)) { this._debug('Received message with correct origin but wrong source. Silently dropping.', event.data); return; } const eventType = event.data &amp;&amp; event.data.eventType; if (!eventType) { this._debug('Received message with no eventType. Silently dropping.'); return; } if (!Object.values(EVENT).includes(eventType)) { this._debug(`Received message with unknown eventType \"${eventType}\". Silently dropping.`); return; } this.emit(eventType, event.data); this.emit(EVENT.ANY, eventType, event.data); }; /** * Create a URL suitable to be used as the embedded iFrame src, by querystring parameters * @param {string} embeddedSigningURL - the embedded signing URL, as returned by a BlueInk * API v2 call to /packet/&lt;packet_id&gt;/embed_url/ * @param {object} options - options, as passed into mount() * @returns {string} a URL with querystring parameters which can be used as the src of the embedded iFrame * @private */ _buildFinalURL(embeddedSigningURL, options) { const optionsWithKey = { [PUBLIC_API_KEY_PARAM]: this._publicAPIKey, ...options, }; return `${embeddedSigningURL}?${qs.stringify(optionsWithKey)}`; } /** * Create an iFrame Element * @param {string} url - the url to be used as the src attribute of the iFrame * @param {string} className - a className (or space separated list of classNames) to be used as the className * attribute of the iFrame. Defaults to IFRAME_CLASSNAME if not provided. * @returns {HTMLIFrameElement} the (unattached) iFrame element * @private */ _createIframe(url, className = IFRAME_CLASSNAME) { const iFrame = document.createElement('iframe'); const origin = this._extractOrigin(url); iFrame.className = className; iFrame.src = url; iFrame.allow = `camera ${origin}; geolocation ${origin}`; return iFrame; } /** * Extract a URL origin, suitable for filtering incoming messages sent by window.postMessage * to those sent from our embedded iFrame. * @param embeddedSigningURL - the original embedded signing URL * @returns {string} The origin part of the URL (consisting of protocol, host name and port, * which might be implicit) * @private */ _extractOrigin(embeddedSigningURL) { const url = new URL(embeddedSigningURL); return url.origin; } /** * Register a listener for events that occur in the embedded iFrame * @method on * @memberof BlueInkEmbed * @param {string} eventType - One of the EVENT constants, e.g. EVENT.COMPLETE, EVENT.READY, etc. * @param {BlueInkEmbed~eventCallback} callback - The callback function that will be invoked when the event occurs. */ /** * Remove a previously registered event listener * @method off * @memberof BlueInkEmbed * @param {string} eventType - One of the EVENT constants, e.g. EVENT.COMPLETE, EVENT.READY, etc. * @param {BlueInkEmbed~eventCallback} callback - The callback function to remove */ /** * Register a listener for a single occurrence of an event * @method once * @memberof BlueInkEmbed * @param {string} eventType - One of the EVENT constants, e.g. EVENT.COMPLETE, EVENT.READY, etc. * @param {BlueInkEmbed~eventCallback} callback - The callback function that will be invokeds */ } /** * An event payload for an error event * @typedef {Object} EventErrorData * @property {string} message - A description of the error that occurred. */ /** * An event payload for a signing event * @typedef {Object} EventAnyData * @property {string} eventType - The type of the event. One of EVENT.COMPLETE, EVENT.READY, etc. * @property {EventErrorData|null} eventData - Additional data for the event, or {}. */ /** * A callback function that will be invoked with event data. * @callback BlueInkEmbed~eventCallback * @param {EventAnyData|EventErrorData|null} eventData - depending on the event type */ export default BlueInkEmbed; × Search results Close "},"global.html":{"id":"global.html","title":"Global","body":" BlueInk Embed JS Classes BlueInkEmbedErrorBlueInkEmbed Global EVENT Global Members &lt;constant&gt; EVENT :string Event types that can be emitted by BlueInkEmbed. These can be accessed via the BlueInkEmbed class, e.g. BlueInkEmbed.EVENT.COMPLETE, etc. Type: string Properties: Name Type Default Description ANY string any Any event occurred. Use this if you want to listen for all events with a single callback. LOAD string load The initial load of the iFrame content is complete. Note, the documents may not yet be ready to sign. READY string ready The documents are ready to sign. COMPLETE string complete The signing is complete. AUTH_FAIL string auth_fail Signer authentication failed. AUTH_SUCCESS string auth_success Signer authentication succeeded. Note, this event is still fired if no authentication options were selected. ERROR string error An error that prevents embedded signing from continuing. Source: embed.js, line 28 Examples embed = new BlueInkEmbed(myPublicAPIKey); embed.on(BlueInkEmbed.EVENT.COMPLETE, () =&gt; { console.log('signing complete!'); }); embed.on(BlueInkEmbed.EVENT.ERROR, (eventData) =&gt; { console.log('Signing error occurred.'); console.log(eventData.message); }); Type Definitions EventErrorData An event payload for an error event Type: Object Properties: Name Type Description message string A description of the error that occurred. Source: embed.js, line 322 EventAnyData An event payload for a signing event Type: Object Properties: Name Type Description eventType string The type of the event. One of EVENT.COMPLETE, EVENT.READY, etc. eventData EventErrorData | null Additional data for the event, or {}. Source: embed.js, line 328 × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" BlueInk Embed JS Classes BlueInkEmbedErrorBlueInkEmbed Global EVENT Classes Classes BlueInkEmbedError BlueInkEmbed × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" BlueInk Embed JS Classes BlueInkEmbedErrorBlueInkEmbed Global EVENT BlueInk Embed JS Library A Javascript library to create embedded signing sessions with the BlueInk API. Installation From NPM: npm install @blueink360/blueink-embed-js Or if you prefer yarn: yarn add @blueink360/blueink-embed-js From CDN: &lt;script src=\"https://cdn.jsdelivr.net/npm/@blueink360/blueink-embed-js/dist/blueink-embed.min.js\"&gt;&lt;/script&gt; If including this library directly with a script tag, the BlueInkEmbed class will be added to the global namespace. Usage To use the library, you will need a public API key from your BlueInk account. If you do not have a BlueInk account, you can create one here. You can send unlimited test Bundles for free while developing your eSignature integration. Quickstart import BlueInkEmbed from 'blueink-embed-js'; const embedUrl = 'EMBED-URL-RETURNED-BY-THE-SERVER'; const embed = new BlueInkEmbed('YOUR-PUBLIC-API-KEY'); // Mount the embedded signing iFrame in a div with ID 'iframe-container' embed.mount(embedUrl, '#iframe-container'); // Optionally, unmount the signing iFrame when done embed.unmount(); Fuller Example, with Error and Event Handling This example shows fetching the embedUrl from the server via axios, and handling errors. import BlueInkEmbed from 'blueink-embed-js'; const exampleRequestData = { signerName: 'Frank Ricard', signerEmail: 'frank@example.com' }; // This assumes that your server-side App can receive requests // at /get-embed-url and will create a new Bundle and return // an embedded signing URL. See the BlueInk API docs for examples. axios.post('/get-embed-url', exampleRequestData) .then(response =&gt; { try { const embedUrl = response.data.embedUrl; const embed = new BlueInkEmbed('YOUR-BLUEINK-PUBLIC-API-KEY'); // Setup event listeners to respond to events emitted // by the embedded signing iFrame embed.on(BlueInkEmbed.EVENT.COMPLETE, () =&gt; { console.log('signing complete!'); }); embed.on(BlueInkEmbed.EVENT.ERROR, (eventData) =&gt; { console.log('Signing error occurred.'); console.log(eventData.message); }); embed.mount(embedUrl, '#iframe-container'); } catch(error) { // An error could be thrown if the public API key is invalid, // or if no element was found with id 'iframe-container' console.log(error.message); } }) .catch(error =&gt; { // This catch block would handle if the /get-embed-url // request returned a 5XX or 4XX error. const message = error.response.data.error || error.message; console.log(message); }); More Resources BlueInkEmbed class and methods Events emitted by the BlueInkEmbed instance BlueInk API Documentation Getting Help / Contributing If you have a BlueInk Account and need help integrating this library into your API project, please contact our support team from your BlueInk account dashboard. If you find issues in this codebase, or have any suggestions for improvement please create an issue here on github. We welcome contributions and will consider any pull requests. If you are making modifications to the library, or running the project, locally the following commands should come in handy. We use yarn internally, but all of the commands below should work with there npm equivalents. # Run the tests $ yarn test $ yarn test:coverage # Build a production, minified version of the library $ yarn run build # Build a development, unminified version of the library $ yarn run build:dev # Run webpack-dev-server, so that the library will be accessible # at http://localhost:8080/blueink-embed.js $ yarn run devserver # Build the docs $ yarn run build:docs License MIT × Search results Close "},"BlueInkEmbedError.html":{"id":"BlueInkEmbedError.html","title":"Class: BlueInkEmbedError","body":" BlueInk Embed JS Classes BlueInkEmbedErrorBlueInkEmbed Global EVENT Class: BlueInkEmbedError BlueInkEmbedError Custom Error class thrown for some errors in BlueInkEmbed new BlueInkEmbedError(message) Create a BlueInkEmbedError Parameters: Name Type Description message string a message providing additional details about the error Source: embed.js, line 61 Classes BlueInkEmbedError × Search results Close "},"BlueInkEmbed.html":{"id":"BlueInkEmbed.html","title":"Class: BlueInkEmbed","body":" BlueInk Embed JS Classes BlueInkEmbedErrorBlueInkEmbed Global EVENT Class: BlueInkEmbed BlueInkEmbed Class that helps create and manage embedded signing iFrames powered by BlueInk. new BlueInkEmbed(publicAPIKey) Create a new BlueInkEmbed instance, which you can use to mount and unmount embedded signing iFrames. Parameters: Name Type Description publicAPIKey string the public API key for your BlueInk API App. This can be obtained by logging into your BlueInk Dashboard, or via the BlueInk API at /account/ Source: embed.js, line 76 Extends EventEmitter Members iFrameEl Source: embed.js, line 208 Methods mount(container, embeddedSigningURL, options) Parameters: Name Type Default Description container string body the css selector of the container into which the embedded signing iFrame will be injected embeddedSigningURL string the embedded signing URL, as returned by an API call to /packets//embed_url/ options object optional arguments Properties Name Type Description debug boolean if true, additional information will be printed to the console and displayed in the iFrame (if there is an error) isTest boolean set to true when testing in a development environment (or locally), to turn off verification of the referring domain. This is only valid for embedded signing of test Bundles (which were created with is_test set to true) locale string set the initial language / locale for the embedded signature iFrame redirectURL string If provided, the parent page (not the iFrame) will be redirected to this URL upon successful completion of a signing replace string If true, the signing iFrame replaces the contents of container, instead of being appended to the contents Source: embed.js, line 136 Throws: when (1) there is already a mounted BlueInkEmbed iFrame instance, (2) the container element does not exist, or (3) the container selector corresponds to more than one element. Type BlueInkEmbedError unmount() Remove the BlueInk eSignature iFrame. If there is no iFrame (ie, mount(...) was not called previously), this is a noop. Source: embed.js, line 184 Type Definitions eventCallback(eventData) A callback function that will be invoked with event data. Parameters: Name Type Description eventData EventAnyData | EventErrorData | null depending on the event type Source: embed.js, line 335 × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
